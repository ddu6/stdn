var e={d:(n,t)=>{for(var i in t)e.o(t,i)&&!e.o(n,i)&&Object.defineProperty(n,i,{enumerable:!0,get:t[i]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n)},n={};function t(e){const n=[];let t=!1;for(const i of e)if(!0!==t)if("\\"!==i){if("'"===i)break;n.push(i)}else t=!0;else t=!1,"\\"!==i&&"'"!==i&&n.push("\\"),n.push(i);return n.join("")}function i(e,n){if(n&&e.length>0&&e[0].trim().length>0&&(1===e.length||e[e.length-1].trim().length>0)&&!/[\n\r',\[\]{}]/.test(e)&&"true"!==e&&"false"!==e&&!/^(?:[+-]?Infinity|NaN|0x[\dA-Fa-f]+|0o[0-7]+|0b[01]+|[+-]?(?:\d*\.?\d+|\d+\.)(?:e[+-]?\d+)?)$/.test(e)&&!e.startsWith("//")&&!e.startsWith("/*"))return e;const t=["'"];for(let n=0;n<e.length;n++){const i=e[n];if("\\"!==i)"'"!==i?t.push(i):t.push("\\'");else{if(n===e.length-1){t.push("\\\\");break}const o=e[n+1];if("\\"===o||"'"===o){t.push("\\\\");continue}t.push(i)}}return t.push("'"),t.join("")}function o(e,n=!1){let t=0,i=!1,o=!1,r=0,s=!1;const c=[];for(let a=0;a<e.length;a++){if(!0===o){o=!1;continue}const u=e[a];if("line"!==s)if("block"!==s)if("'"!==u){if(i)"\\"===u&&(o=!0);else if("{"!==u&&"["!==u)if("}"!==u&&"]"!==u){if(!(t>0))if(","!==u&&"\n"!==u){if(!(r<a))if(0!==u.trimEnd().length){if("/"===u){const n=e[a+1];if("/"===n){a++,s="line",r=a+1;continue}if("*"===n){a++,s="block",r=a+1;continue}}}else r=a+1}else{const n=e.slice(r,a).trimEnd();n.length>0&&c.push(n),r=a+1}}else{if(t--,t<0){const n=e.slice(r,a).trimEnd();n.length>0&&c.push(n);break}0===t&&(c.push(e.slice(r,a+1)),r=a+1)}else if(t++,1===t&&!n){const n=e.slice(r,a).trimEnd();n.length>0&&c.push(n),r=a}}else{if(!i){if(i=!0,0===t&&!n){const n=e.slice(r,a).trimEnd();n.length>0&&c.push(n),r=a}continue}i=!1,0===t&&(c.push(e.slice(r,a+1)),r=a+1)}else"*"===u&&"/"===e[a+1]&&(a++,s=!1),r=a+1;else"\n"===u&&(s=!1),r=a+1}if(!i&&0===t){const n=e.slice(r).trimEnd();n.length>0&&c.push(n)}return c}function r(e){if(0===(e=e.trimStart()).length)return;const n=e[0];return"'"===n?t(e.slice(1)):"["===n?function(e){const n=[];for(const t of o(e)){const e=r(t);if(void 0===e)return;n.push(e)}return n}(e.slice(1)):"{"===n?function(e){const n={};for(const t of o(e,!0)){const e=t.match(/^\s*([\w-]+)/);if(null===e){const e=r(t);if(void 0===e)return;n.__=e;continue}const i=e[1],o=e[0].length;let s=t.slice(o).trimEnd();if(0===s.length)n[i]=!0;else{const e=r(s);if(void 0===e)return;n[i]=e}}return n}(e.slice(1)):"true"===(e=e.trimEnd())||"false"!==e&&(/^(?:[+-]?Infinity|NaN|0x[\dA-Fa-f]+|0o[0-7]+|0b[01]+|[+-]?(?:\d*\.?\d+|\d+\.)(?:e[+-]?\d+)?)$/.test(e)?Number(e):/[\n\r',\[\]{}]/.test(e)?void 0:e)}function s(e){let n="div",t=[];const i={};for(const o in e){const r=e[o];if(void 0!==r)if("__"!==o)Array.isArray(r)?(n=o,t=a(r)):i[o]="object"!=typeof r?r:s(r);else{if(n="katex",!Array.isArray(r)){t=a([r]);continue}t=a(r)}}return{tag:n,options:i,children:t}}function c(e){const n=[];for(const t of e)if("string"!=typeof t)"object"!=typeof t||Array.isArray(t)||n.push(s(t));else for(const e of t)e>=" "&&n.push(e);return n}function a(e){const n=[];for(const t of e)Array.isArray(t)?n.push(c(t)):n.push(c([t]));return n}function u(e){const n=r(`[${e}]`);if(Array.isArray(n))return a(n)}function l(e,n,t=!1){let i=0,o=!1,r=!1,s=0,c=!1,a=[];const u=[];for(let l=0;l<e.length;l++){if(!0===r){r=!1;continue}const d=e[l];if("line"!==c)if("block"!==c)if("'"!==d){if(o)"\\"===d&&(r=!0);else if("{"!==d&&"["!==d)if("}"!==d&&"]"!==d){if(!(i>0))if(","!==d&&"\n"!==d){if(!(s<l))if(0!==d.trimEnd().length){if("/"===d){const n=e[l+1];if("/"===n){s=l,l++,c="line";continue}if("*"===n){s=l,l++,c="block";continue}}}else s=l+1}else{const t=e.slice(s,l).trimEnd();t.length>0&&(u.push({value:t,index:n+s,comment:a}),a=[]),s=l+1}}else{if(i--,i<0){const t=e.slice(s,l).trimEnd();t.length>0&&(u.push({value:t,index:n+s,comment:a}),a=[]);break}0===i&&(u.push({value:e.slice(s,l+1),index:n+s,comment:a}),a=[],s=l+1)}else if(i++,1===i&&!t){const t=e.slice(s,l).trimEnd();t.length>0&&(u.push({value:t,index:n+s,comment:a}),a=[]),s=l}}else{if(!o){if(o=!0,0===i&&!t){const t=e.slice(s,l).trimEnd();t.length>0&&(u.push({value:t,index:n+s,comment:a}),a=[]),s=l}continue}o=!1,0===i&&(u.push({value:e.slice(s,l+1),index:n+s,comment:a}),a=[],s=l+1)}else"*"===d&&"/"===e[l+1]&&(l++,c=!1,a.push(...e.slice(s,l+1).replace(/\n[ ]*/g,"\n ").split("\n")),s=l+1);else"\n"===d&&(c=!1,a.push(e.slice(s,l).trimEnd()),s=l+1)}if(!o&&0===i&&!1===c){const t=e.slice(s).trimEnd();t.length>0&&u.push({value:t,index:n+s,comment:a})}return u}function d(e,n=0,i=[]){n+=e.length;const o=function(e,n){if(0===e.length)return;const i=e[0];return"'"===i?t(e.slice(1)):"["===i?function(e,n){const t=[];for(const{value:i,index:o,comment:r}of l(e,n)){const e=d(i,o,r);if(void 0===e)return;t.push(e)}return t}(e.slice(1),n+1):"{"===i?function(e,n){const t={};for(const{value:i,index:o,comment:r}of l(e,n,!0)){const e=i.match(/^\s*([\w-]+)/);if(null===e){const e=d(i,o,r);if(void 0===e)return;t.__=e;continue}const n=e[1],s=e[0].length;let c=i.slice(s).trimEnd();if(0===c.length)t[n]={value:!0,index:o+s,comment:r};else{const e=d(c,o+s,r);if(void 0===e)return;t[n]=e}}return t}(e.slice(1),n+1):"true"===(e=e.trimEnd())||"false"!==e&&(/^(?:[+-]?Infinity|NaN|0x[\dA-Fa-f]+|0o[0-7]+|0b[01]+|[+-]?(?:\d*\.?\d+|\d+\.)(?:e[+-]?\d+)?)$/.test(e)?Number(e):/[\n\r',\[\]{}]/.test(e)?void 0:e)}(e=e.trimStart(),n-=e.length);if(void 0!==o)return{value:o,index:n,comment:i}}function f(e,n){let t="div";const i={value:[],index:n,comment:[]},o={value:{},index:n,comment:[]};for(const n in e){let r=e[n];if(void 0===r)continue;const{value:s,index:c,comment:a}=r;if("__"!==n)Array.isArray(s)?(t=n,i.value=h(s,c),i.index=c,i.comment=a):o.value[n]="object"!=typeof s?{value:s,index:c,comment:a}:{value:f(s,c),index:c,comment:a};else{if(t="katex",i.index=c,!Array.isArray(s)){i.value=h([r],c);continue}i.value=h(s,c),i.comment=a}}return{tag:{value:t,index:n,comment:[]},options:o,children:i}}function m(e){const n=[];for(const{value:t,index:i,comment:o}of e)if("string"!=typeof t)"object"!=typeof t||Array.isArray(t)||n.push({value:f(t,i),index:i,comment:o});else for(const e of t)e>=" "&&n.push({value:e,index:i,comment:[]});return n}function h(e,n){const t=[];for(const i of e)if(Array.isArray(i.value))t.push({value:m(i.value),index:i.index,comment:i.comment});else{const e=m([i]);e.length>0&&(n=e[0].index),t.push({value:e,index:n,comment:[]})}return t}function v(e){const n=d(`[${e}]`,-1);if(void 0!==n&&Array.isArray(n.value))return{value:h(n.value,0),index:0,comment:n.comment}}function p(e,n={}){return Array.isArray(e)?function(e,{addDecorativeComma:n,addDecorativeSpace:t,indentLevel:i,indentTarget:o,useUnquotedString:r}){n=null!=n?n:"never",o=null!=o?o:"none",i=null!=i?i:0;const s=[],c=e.length>1&&("all"===o||"array"===o||"arrayInObjectAndThis"===o),a=i+(c?1:0);"arrayInObjectAndThis"===o&&(o="arrayInObject");const u="always"===t||"afterComma"===t?", ":",";let l;for(let i=0;i<e.length;i++){let d;d=void 0===l?p(e[i],{addDecorativeComma:n,addDecorativeSpace:t,indentTarget:o,indentLevel:a,useUnquotedString:r}):l,i!==e.length-1&&(l=p(e[i+1],{addDecorativeComma:n,addDecorativeSpace:t,indentTarget:o,indentLevel:a,useUnquotedString:r})),c||i===e.length-1||"always"!==n&&(d.endsWith("'")||d.endsWith("}")||d.endsWith("]")||void 0!==l&&(l.endsWith("'")||l.endsWith("}")||l.endsWith("]")))?s.push(d):s.push(d+u)}if(c){let e="\n";for(let n=0;n<i;n++)e+="    ";let n=e;return i>=0&&(n+="    "),`[${n}${s.join(n)}${e}]`}return`[${s.join("")}]`}(e,n):"object"==typeof e?function(e,{addDecorativeComma:n,addDecorativeSpace:t,indentLevel:i,indentTarget:o,useUnquotedString:r}){n=null!=n?n:"never",o=null!=o?o:"none",i=null!=i?i:0;const s=[],c=Object.keys(e),a=c.length>1&&("all"===o||"object"===o),u=i+(a?1:0);"arrayInObject"===o&&(o="arrayInObjectAndThis");const l="always"===t||"afterComma"===t?", ":",",d="always"===t||"afterKey"===t?" ":"";for(let i=0;i<c.length;i++){const f=c[i];if(null===f.match(/^[\w-]+$/))continue;const m=e[f];if(void 0===m)continue;const h=p(m,{addDecorativeComma:n,addDecorativeSpace:t,indentTarget:o,indentLevel:u,useUnquotedString:"__"===f&&"string"==typeof m?void 0:r});h.startsWith("'")||h.startsWith("[")||h.startsWith("{")?a||i===c.length-1||"always"!==n&&"inObject"!==n?s.push(("__"===f?"":f+d)+h):s.push(("__"===f?"":f+d)+h+l):"true"===h?a||i===c.length-1?s.push(f):s.push(f+l):a||i===c.length-1?s.push(`${f} ${h}`):s.push(`${f} ${h}${l}`)}if(a){let e="\n";for(let n=0;n<i;n++)e+="    ";let n=e;return i>=0&&(n+="    "),`{${n}${s.join(n)}${e}}`}return`{${s.join("")}}`}(e,n):"number"==typeof e?e.toString():"string"==typeof e?i(e,n.useUnquotedString):!0===e?"true":!1===e?"false":""}function g(e){const n={},{tag:t,children:i,options:o}=e;for(const e in o){const t=o[e];n[e]="object"==typeof t?g(t):t}return"katex"===t?n.__=function(e){const n=b(e);if(1===n.length){const e=n[0];if("string"==typeof e)return e}return n}(i):("div"!==t||i.length>0)&&(n[t]=b(i)),n}function y(e){const n=[];let t="";for(const i of e)"object"!=typeof i?t+=i:(t.length>0&&(n.push(t),t=""),n.push(g(i)));return t.length>0&&n.push(t),1===n.length?n[0]:n}function b(e){const n=[];for(const t of e)n.push(y(t));return n}function x(e){return void 0===e?"":e.length<2?p(b(e),{addDecorativeComma:"inObject",addDecorativeSpace:"always",indentTarget:"arrayInObjectAndThis",useUnquotedString:!0}).slice(1,-1).trim():p(b(e),{addDecorativeComma:"inObject",addDecorativeSpace:"always",indentLevel:-1,indentTarget:"arrayInObjectAndThis",useUnquotedString:!0}).slice(1,-1).trim()}function j(e,n={}){if(void 0===e)return"";const{value:t}=e;return Array.isArray(t)?function(e,{addDecorativeComma:n,addDecorativeSpace:t,indentLevel:i,indentTarget:o,useUnquotedString:r}){n=null!=n?n:"never",o=null!=o?o:"none",i=null!=i?i:0;const s=[],c=e.length>1&&("all"===o||"array"===o||"arrayInObjectAndThis"===o)||void 0!==e.find((e=>e.comment.length>0)),a=i+(c?1:0);"arrayInObjectAndThis"===o&&(o="arrayInObject");const u="always"===t||"afterComma"===t?", ":",";let l;for(let i=0;i<e.length;i++){const d=e[i],{comment:f}=d;let m;m=void 0===l?j(d,{addDecorativeComma:n,addDecorativeSpace:t,indentTarget:o,indentLevel:a,useUnquotedString:r}):l,i!==e.length-1&&(l=j(e[i+1],{addDecorativeComma:n,addDecorativeSpace:t,indentTarget:o,indentLevel:a,useUnquotedString:r})),c||i===e.length-1||"always"!==n&&(m.endsWith("'")||m.endsWith("}")||m.endsWith("]")||void 0!==l&&(l.endsWith("'")||l.endsWith("}")||l.endsWith("]")))?(f.length>0&&s.push(...f),s.push(m)):s.push(m+u)}if(c){let e="\n";for(let n=0;n<i;n++)e+="    ";let n=e;return i>=0&&(n+="    "),`[${n}${s.join(n)}${e}]`}return`[${s.join("")}]`}(t,n):"object"==typeof t?function(e,{addDecorativeComma:n,addDecorativeSpace:t,indentLevel:i,indentTarget:o,useUnquotedString:r}){n=null!=n?n:"never",o=null!=o?o:"none",i=null!=i?i:0;const s=[],c=Object.keys(e);let a=c.length>1&&("all"===o||"object"===o);if(!a)for(const n of c){const t=e[n];if(void 0!==t&&t.comment.length>0){a=!0;break}}const u=i+(a?1:0);"arrayInObject"===o&&(o="arrayInObjectAndThis");const l="always"===t||"afterComma"===t?", ":",",d="always"===t||"afterKey"===t?" ":"";for(let i=0;i<c.length;i++){const f=c[i];if(null===f.match(/^[\w-]+$/))continue;const m=e[f];if(void 0===m)continue;const{value:h,comment:v}=m,p=j(m,{addDecorativeComma:n,addDecorativeSpace:t,indentTarget:o,indentLevel:u,useUnquotedString:"__"===f&&"string"==typeof h?void 0:r});v.length>0&&s.push(...v),p.startsWith("'")||p.startsWith("[")||p.startsWith("{")?a||i===c.length-1||"always"!==n&&"inObject"!==n?s.push(("__"===f?"":f+d)+p):s.push(("__"===f?"":f+d)+p+l):"true"===p?a||i===c.length-1?s.push(f):s.push(f+l):a||i===c.length-1?s.push(`${f} ${p}`):s.push(`${f} ${p}${l}`)}if(a){let e="\n";for(let n=0;n<i;n++)e+="    ";let n=e;return i>=0&&(n+="    "),`{${n}${s.join(n)}${e}}`}return`{${s.join("")}}`}(t,n):"string"==typeof t?i(t,n.useUnquotedString):"number"==typeof t?t.toString():!0===t?"true":!1===t?"false":""}function A(e){const n={},{tag:{value:t},children:i,options:{value:o}}=e;for(const e in o){const t=o[e];if(void 0===t)continue;const{value:i,index:r,comment:s}=t;n[e]="object"==typeof i?{value:A(i),index:r,comment:s}:{value:i,index:r,comment:s}}return"katex"===t?n.__=function(e){const n=S(e.value);if(1===n.length){const{value:t,index:i,comment:o}=n[0];if("string"==typeof t)return{value:t,index:i,comment:e.comment.concat(o)}}return{value:n,index:e.index,comment:e.comment}}(i):("div"!==t||i.value.length>0)&&(n[t]={value:S(i.value),index:i.index,comment:i.comment}),n}function $(e){const n=[];let t="",i=0,o=[];for(const{value:r,index:s,comment:c}of e.value)"object"!=typeof r?(0===t.length&&(i=s,o=c),t+=r):(t.length>0&&(n.push({value:t,index:i,comment:o}),t=""),n.push({value:A(r),index:s,comment:c}));if(t.length>0&&n.push({value:t,index:i,comment:o}),1===n.length){const t=n[0];return{value:t.value,index:t.index,comment:e.comment.concat(t.comment)}}return{value:n,index:e.index,comment:e.comment}}function S(e){const n=[];for(const t of e)n.push($(t));return n}function D(e){if(void 0===e)return"";const{value:n,index:t,comment:i}=e;return n.length<2?j({value:S(n),index:t,comment:i},{addDecorativeComma:"inObject",addDecorativeSpace:"always",indentTarget:"arrayInObjectAndThis",useUnquotedString:!0}).slice(1,-1).trim():j({value:S(n),index:t,comment:i},{addDecorativeComma:"inObject",addDecorativeSpace:"always",indentLevel:-1,indentTarget:"arrayInObjectAndThis",useUnquotedString:!0}).slice(1,-1).trim()}function k(e){return D(v(e))}function O(e){return e.trim().split(/\s+/).map((e=>/^\d+$/.test(e)?Number(e):e.startsWith('"')?e.slice(1,-1):e))}function T(e){return e.map((e=>"number"==typeof e?e:/^\d+$/.test(e)?`'${e}'`:e)).join(" ")}function W(e,n,t=0){const i=[];if(0===e.length||0===n.length)return i;const o=e[0];if("number"!=typeof o)return i;const r=n[Math.min(n.length-1,o+t)];if(void 0===r)return i;i.push(r);let s=r;for(let n=1;n<e.length;n++){const t=e[n];if("number"==typeof t){if(Array.isArray(s)){const e=s[t];if("object"!=typeof e)break;i.push(s=e);continue}const e=s.children[t];if(void 0===e)break;i.push(s=e);continue}if(Array.isArray(s))break;const o=s.options[t];if("object"!=typeof o)break;i.push(s=o)}return i}function _(e,n,t=0){const i=[],{value:o}=n;if(0===e.length||0===o.length)return i;const r=e[0];if("number"!=typeof r)return i;const s=o[Math.min(o.length-1,r+t)];if(void 0===s)return i;i.push(s);let c=s.value;for(let n=1;n<e.length;n++){const t=e[n];if("number"==typeof t){if(Array.isArray(c)){const e=c[t];if(void 0===e)break;const n=e.value;if("object"!=typeof n)break;i.push({value:n,index:e.index,comment:e.comment}),c=n;continue}const e=c.children.value[t];if(void 0===e)break;i.push(e),c=e.value;continue}if(Array.isArray(c))break;const o=c.options.value[t];if(void 0===o)break;const r=o.value;if("object"!=typeof r)break;i.push({value:r,index:o.index,comment:o.comment}),c=r}return i}e.d(n,{WU:()=>k,Qc:()=>u,f2:()=>O,Mo:()=>v,cZ:()=>_,ow:()=>W,Pz:()=>x,yB:()=>T,kf:()=>D});var w=n.WU,U=n.Qc,C=n.f2,I=n.Mo,E=n.cZ,q=n.ow,L=n.Pz,N=n.yB,P=n.kf;export{w as format,U as parse,C as parsePositionStr,I as parseWithIndex,E as posiitonToUnitOrLinesWithIndex,q as positionToUnitOrLines,L as stringify,N as stringifyPosition,P as stringifyWithComment};